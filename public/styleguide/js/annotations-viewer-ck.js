/*!
 * Annotations Support for the Viewer - v0.1
 *
 * Copyright (c) 2013 Dave Olsen, http://dmolsen.com
 * Licensed under the MIT license
 *
 */var annotationsViewer={commentsActive:!1,sw:document.documentElement.clientWidth,breakpoint:650,onReady:function(){$("body").addClass("comments-ready");$("#sg-t-annotations").click(function(){annotationsViewer.toggleComments();return!1});annotationsViewer.commentContainerInit()},toggleComments:function(){if(!annotationsViewer.commentsActive){annotationsViewer.commentsActive=!0;document.getElementById("sg-viewport").contentWindow.postMessage("on",window.location.protocol+"//"+window.location.host);$("#sg-t-annotations").text("Annotations On")}else{annotationsViewer.commentsActive=!1;document.getElementById("sg-viewport").contentWindow.postMessage("off",window.location.protocol+"//"+window.location.host);$("#sg-t-annotations").text("Annotations Off");annotationsViewer.slideComment(999)}},commentContainerInit:function(){$('<div id="comment-container" style="display: none;"></div>').html('<a href="#" id="close-comments">Close</a><h2 id="comment-title">Annotation Title</h2><div id="comment-text">Here is some comment text</div>').appendTo("body").css("bottom",-$(document).outerHeight());annotationsViewer.sw<annotationsViewer.breakpoint?$("#comment-container").hide():$("#comment-container").show();$("body").delegate("#close-comments","click",function(e){annotationsViewer.slideComment($("#comment-container").outerHeight());return!1})},slideComment:function(e){$("#comment-container").show();if(annotationsViewer.sw>annotationsViewer.breakpoint)$("#comment-container").css("bottom",-e);else{var t=$("#comment-container").offset().top;$("html,body").animate({scrollTop:t},500)}},updateComment:function(e,t,n){var r=$("#comment-container"),i=$("#comment-title"),s=$("#comment-text");i.text(t);s.html(n);annotationsViewer.slideComment(0)},receiveIframeMessage:function(e){if(e.origin!==window.location.protocol+"//"+window.location.host)return;e.data.title!=undefined&&annotationsViewer.updateComment(e.data.el,e.data.title,e.data.comment)}};$(document).ready(function(){annotationsViewer.onReady()});window.addEventListener("message",annotationsViewer.receiveIframeMessage,!1);$("#sg-view li a").click(function(){$(this).parent().parent().removeClass("active");$(this).parent().parent().parent().parent().removeClass("active")});